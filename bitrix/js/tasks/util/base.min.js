BX.namespace("Tasks.Util");BX.Tasks.Util.Base=function(t){};BX.mergeEx(BX.Tasks.Util.Base.prototype,{construct:function(){},fireEvent:function(t,e){BX.onCustomEvent(this,t,e)},bindEvent:function(t,e){BX.addCustomEvent(this,t,e)},callMethod:function(t,e,s){return t.prototype[e].apply(this,s)},callConstruct:function(t){this.callMethod(t,"construct")},runParentConstructor:function(t){if(typeof t.superclass=="object"){t.superclass.constructor.apply(this,[null,true])}},walkPrototypeChain:function(t,e){var s=t.constructor;while(typeof s!="undefined"&&s!=null){e.apply(this,[s.prototype,s.superclass]);if(typeof s.superclass=="undefined"){return}s=s.superclass.constructor}},destroy:function(){this.walkPrototypeChain(this,function(t){if(typeof t.destruct=="function"){t.destruct.call(this)}})},option:function(t,e){if(typeof e!="undefined"){this.opts[t]=e}else{return typeof this.opts[t]!="undefined"?this.opts[t]:false}},initialized:function(){return this.sys.initialized},passCtx:function(t){var e=this;return function(){var s=Array.prototype.slice.call(arguments);s.unshift(this);return t.apply(e,s)}},id:function(t){if(typeof t!="undefined"&&BX.type.isNotEmptyString(t)){this.sys.id=t.toString().toLowerCase()}else{return this.sys.id}},register:function(){if(this.option("registerDispatcher")){var t=this.id();if(t){BX.Tasks.Util.Dispatcher.register(t,this)}}}});BX.Tasks.Util.Base.extend=function(t){if(typeof t=="undefined"||!BX.type.isPlainObject(t)){t={}}var e=function(s,i){this.runParentConstructor(e);if(typeof this.opts=="undefined"){this.opts={registerDispatcher:false}}if(typeof t.options!="undefined"&&BX.type.isPlainObject(t.options)){BX.mergeEx(this.opts,t.options)}if(typeof this.sys=="undefined"){this.sys={id:false,initialized:false}}if(typeof t.sys!="undefined"&&BX.type.isPlainObject(t.sys)){BX.mergeEx(this.sys,t["sys"])}delete t;delete e;if(!i){if(typeof s!="undefined"&&BX.type.isPlainObject(s)){BX.mergeEx(this.opts,s)}this.id(this.option("id"));this.register();this.construct();this.sys.initialized=true}};e.extend=BX.Tasks.Util.Base.extend;BX.extend(e,this);t.methods=t.methods||{};t.constants=t.constants||{};if(typeof t.methods!="undefined"&&BX.type.isPlainObject(t.methods)){for(var s in t.methods){if(t.methods.hasOwnProperty(s)){e.prototype[s]=t.methods[s]}}}if(typeof t.constants!="undefined"&&BX.type.isPlainObject(t.constants)){for(var s in t.constants){if(t.constants.hasOwnProperty(s)){e.prototype[s]=t.constants[s]}}}if(typeof t.methods.construct!="function"){var i=this;e.prototype.construct=function(){this.callConstruct(i);delete i}}if(typeof t.methods.destruct!="function"){e.prototype.destruct=BX.DoNothing()}return e};BX.Tasks.Util.Dispatcher=BX.Tasks.Util.Base.extend({methods:{construct:function(){this.callConstruct(BX.Tasks.Util.Base);this.vars={registry:{},pend:{bind:{}}}},destruct:function(){this.vars=null},registerInstance:function(t,e){if(!BX.type.isNotEmptyString(t)){throw new ReferenceError("Trying to register while id is empty")}if(e==null||e==false){throw new ReferenceError("Bad instance")}if(typeof this.vars.registry[t]!="undefined"){throw new ReferenceError('The id "'+t.toString()+'" is already in use in registry')}this.vars.registry[t]=e;if(typeof this.vars.pend.bind[t]!="undefined"){for(var s in this.vars.pend.bind[t]){this.vars.registry[t].bindEvent(this.vars.pend.bind[t][s].event,this.vars.pend.bind[t][s].cb)}delete this.vars.pend.bind[t]}},get:function(t){if(typeof this.vars.registry[t]=="undefined"){return null}return this.vars.registry[t]},addDeferredBind:function(t,e,s){if(!BX.type.isNotEmptyString(t)){throw new TypeError("Bad id: "+t)}if(!BX.type.isNotEmptyString(e)){throw new TypeError("Bad event name: "+e)}if(!BX.type.isFunction(s)){throw new TypeError("Callback is not a function to call for: "+t+" "+e)}if(typeof this.vars.registry[t]!="undefined"){this.vars.registry[t].bindEvent(e,s)}else{if(typeof this.vars.pend.bind[t]=="undefined"){this.vars.pend.bind[t]=[]}this.vars.pend.bind[t].push({event:e,cb:s})}},addDeferredFire:function(t,e,s,i){if(!BX.type.isNotEmptyString(t)){throw new TypeError("Bad id: "+t)}if(!BX.type.isNotEmptyString(e)){throw new TypeError("Bad event name: "+e)}s=s||[];if(typeof this.vars.registry[t]!="undefined"){this.vars.registry[t].fireEvent(e,s)}else{}}}});BX.Tasks.Util.Dispatcher.register=function(t,e){BX.Tasks.Util.Dispatcher.getInstance().registerInstance(t,e)};BX.Tasks.Util.Dispatcher.get=function(t){return BX.Tasks.Util.Dispatcher.getInstance().get(t)};BX.Tasks.Util.Dispatcher.bindEvent=function(t,e,s){BX.Tasks.Util.Dispatcher.getInstance().addDeferredBind(t,e,s)};BX.Tasks.Util.Dispatcher.fireEvent=function(t,e,s,i){BX.Tasks.Util.Dispatcher.getInstance().addDeferredFire(t,e,s,i)};BX.Tasks.Util.Dispatcher.getInstance=function(){if(typeof BX.Tasks.Singletons=="undefined"){BX.Tasks.Singletons={}}if(typeof BX.Tasks.Singletons.dispatcher=="undefined"){BX.Tasks.Singletons.dispatcher=new BX.Tasks.Util.Dispatcher({registerDispatcher:false})}return BX.Tasks.Singletons.dispatcher};
//# sourceMappingURL=base.map.js