BX.ListsElementEditClass=function(){var t=function(t){this.randomString=t.randomString;this.ajaxUrl="/bitrix/components/bitrix/lists.element.edit/ajax.php";this.urlTabBp=t.urlTabBp;this.iblockTypeId=t.iblockTypeId;this.iblockId=t.iblockId;this.elementId=t.elementId;this.socnetGroupId=t.socnetGroupId;this.sectionId=t.sectionId};t.prototype.completeWorkflow=function(t,e){BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","completeWorkflow"),data:{workflowId:t,iblockTypeId:this.iblockTypeId,elementId:this.elementId,iblockId:this.iblockId,socnetGroupId:this.socnetGroupId,sectionId:this.sectionId,action:e,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.status=="success"){this.showModalWithStatusAction({status:"success",message:t.message});setTimeout(document.location.href=this.urlTabBp,1e3)}else{t.errors=t.errors||[{}];this.showModalWithStatusAction({status:"error",message:t.errors.pop().message})}},this)})};t.prototype.addToLinkParam=function(t,e,s){if(!t.length){return"?"+e+"="+s}t=BX.util.remove_url_param(t,e);if(t.indexOf("?")!=-1){return t+"&"+e+"="+s}return t+"?"+e+"="+s};t.prototype.showModalWithStatusAction=function(t,e){t=t||{};if(!t.message){if(t.status=="success"){t.message=BX.message("LISTS_STATUS_ACTION_SUCCESS")}else{t.message=BX.message("LISTS_STATUS_ACTION_ERROR")+". "+this.getFirstErrorFromResponse(t)}}var s=BX.create("div",{props:{className:"bx-lists-alert"},children:[BX.create("span",{props:{className:"bx-lists-aligner"}}),BX.create("span",{props:{className:"bx-lists-alert-text"},text:t.message}),BX.create("div",{props:{className:"bx-lists-alert-footer"}})]});var r=BX.PopupWindowManager.getCurrentPopup();if(r){r.destroy()}var o=setTimeout(function(){var t=BX.PopupWindowManager.getCurrentPopup();if(!t||t.uniquePopupId!="bx-lists-status-action"){return}t.close();t.destroy()},3500);var a=BX.PopupWindowManager.create("bx-lists-status-action",null,{content:s,onPopupClose:function(){this.destroy();clearTimeout(o)},autoHide:true,zIndex:2e3,className:"bx-lists-alert-popup"});a.show();BX("bx-lists-status-action").onmouseover=function(t){clearTimeout(o)};BX("bx-lists-status-action").onmouseout=function(t){o=setTimeout(function(){var t=BX.PopupWindowManager.getCurrentPopup();if(!t||t.uniquePopupId!="bx-lists-status-action"){return}t.close();t.destroy()},3500)}};t.prototype.addNewTableRow=function(t,e,s,r){var o=document.getElementById(t);var a=o.rows.length;var i=o.insertRow(a);for(var n=0;n<e;n++){var l=i.insertCell(n);var c=o.rows[a-1].cells[n].innerHTML;l.innerHTML=c.replace(s,function(t){return t.replace("[n"+arguments[r]+"]","[n"+(1+parseInt(arguments[r]))+"]")})}};t.prototype.elementDelete=function(t,e){var s=document.getElementById(t);var r=document.getElementById("action");if(s&&r){if(confirm(e)){r.value="delete";s.submit()}}};t.prototype.createAdditionalHtmlEditor=function(t,e,s){var r=document.getElementById(t);var o=r.rows.length;var a=r.insertRow(o);var i=a.insertCell(0);var n=r.rows[o-1].cells[0].innerHTML;var l=0,c,d,p;while(true){c=n.indexOf("[n",l);if(c<0)break;d=n.indexOf("]",c);if(d<0)break;p=parseInt(n.substr(c+2,d-c));n=n.substr(0,c)+"[n"+ ++p+"]"+n.substr(d+1);l=c+1}l=0;while(true){c=n.indexOf("__n",l);if(c<0)break;d=n.indexOf("_",c+2);if(d<0)break;p=parseInt(n.substr(c+3,d-c));n=n.substr(0,c)+"__n"+ ++p+"_"+n.substr(d+1);l=d+1}i.innerHTML=n;var u="id_"+e+"__n"+o+"_";var m=e+"[n"+o+"][VALUE]";window.BXHtmlEditor.Show({id:u,inputName:m,name:m,content:"",width:"100%",height:"200",allowPhp:false,limitPhpAccess:false,templates:[],templateId:"",templateParams:[],componentFilter:"",snippets:[],placeholder:"Text here...",actionUrl:"/bitrix/tools/html_editor_action.php",cssIframePath:"/bitrix/js/fileman/html_editor/iframe-style.css?1412693817",bodyClass:"",bodyId:"",spellcheck_path:"/bitrix/js/fileman/html_editor/html-spell.js?v=1412693817",usePspell:"N",useCustomSpell:"Y",bbCode:false,askBeforeUnloadPage:false,settingsKey:"user_settings_1",showComponents:true,showSnippets:true,view:"wysiwyg",splitVertical:false,splitRatio:"1",taskbarShown:false,taskbarWidth:"250",lastSpecialchars:false,cleanEmptySpans:true,lazyLoad:false,showTaskbars:false,showNodeNavi:false,controlsMap:[{id:"Bold",compact:true,sort:"80"},{id:"Italic",compact:true,sort:"90"},{id:"Underline",compact:true,sort:"100"},{id:"Strikeout",compact:true,sort:"110"},{id:"RemoveFormat",compact:true,sort:"120"},{id:"Color",compact:true,sort:"130"},{id:"FontSelector",compact:false,sort:"135"},{id:"FontSize",compact:false,sort:"140"},{separator:true,compact:false,sort:"145"},{id:"OrderedList",compact:true,sort:"150"},{id:"UnorderedList",compact:true,sort:"160"},{id:"AlignList",compact:false,sort:"190"},{separator:true,compact:false,sort:"200"},{id:"InsertLink",compact:true,sort:"210",wrap:"bx-htmleditor-"+s},{id:"InsertImage",compact:false,sort:"220"},{id:"InsertVideo",compact:true,sort:"230",wrap:"bx-htmleditor-"+s},{id:"InsertTable",compact:false,sort:"250"},{id:"Code",compact:true,sort:"260"},{id:"Quote",compact:true,sort:"270",wrap:"bx-htmleditor-"+s},{id:"Smile",compact:false,sort:"280"},{separator:true,compact:false,sort:"290"},{id:"Fullscreen",compact:false,sort:"310"},{id:"BbCode",compact:true,sort:"340"},{id:"More",compact:true,sort:"400"}],autoResize:true,autoResizeOffset:"40",minBodyWidth:"350",normalBodyWidth:"555"});var f=BX.findChildrenByClassName(BX(t),"bx-html-editor");for(var h in f){var b=f[h].getAttribute("id");var I=BX.findChildrenByClassName(BX(b),"bx-editor-iframe");if(I.length>1){for(var g=0;g<I.length-1;g++){I[g].parentNode.removeChild(I[g])}}}};return t}();
//# sourceMappingURL=script.map.js