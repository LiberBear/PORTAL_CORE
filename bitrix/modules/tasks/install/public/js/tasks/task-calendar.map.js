{"version":3,"file":"task-calendar.min.js","sources":["task-calendar.js"],"names":["BX","namespace","Tasks","Calendar","settings","this","weekends",6,"holidays","worktime","start","hours","minutes","end","setWeekends","setHolidays","setWorkTime","adaptSettings","cwt","cOpts","type","isPlainObject","wh","HOURS","we","WEEKEND","dayMap","MO","TU","WE","TH","FR","SA","SU","pad","num","toString","length","START","H","M","END","weekEnds","weekStart","WEEK_START","k","HOLIDAYS","push","month","parseInt","day","D","prototype","getClosestWorkTime","date","isForward","startDate","endDate","processEachDay","Date","getTime","calculateDuration","duration","calculateStartDate","newDate","interval","calculateEndDate","callback","currentDate","endless","intervals","getWorkHours","i","intervalStart","intervalEnd","availableStart","availableEnd","call","add","floorDate","Unit","Day","isWeekend","isHoliday","getWorkIntervals","year","getUTCFullYear","getUTCMonth","getUTCDate","time","UTC","getWorkDayDuration","isWorkTime","getUTCDay","isArray","j","holiday","validMonth","isNumber","validDay","isNotEmptyString","times","regex","matches","exec","startHours","startMinutes","endHours","endMinutes","isWorkTimeCorrect","sort","a","b","prevTime"],"mappings":"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"}