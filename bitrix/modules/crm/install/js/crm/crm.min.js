if(!obCrm){var obCrm={}}CRM=function(e,t,a,n,r,o,c,i,p,l,m){this.crmID=e;this.div=t;this.el=a;this.name=n;this.PopupEntityType=i;this.PopupTabs={};this.PopupElement=r;this.PopupPrefix=o;this.PopupMultiple=c;this.PopupBlock={};this.PopupSearch={};this.PopupSearchInput=null;this.PopupTabsIndex=0;this.PopupTabsIndexId="";this.PopupLocalize=p;this.popup=null;this.onSaveListeners=[];this.disableMarkup=!!l;this.onBeforeSearchListeners=[];this.options={requireRequisiteData:false};if(m&&typeof m==="object"){if(!!m["requireRequisiteData"])this.options.requireRequisiteData=true}};CRM.prototype.Init=function(){this.popupShowMarkup();this.PopupTabs=BX.findChildren(BX("crm-"+this.crmID+"_"+this.name+"-tabs"),{className:"crm-block-cont-tabs"});if(this.PopupTabs.length>0){this.PopupTabsIndex=0;this.PopupTabsIndexId=this.PopupTabs[0].id}this.PopupItem={};this.PopupItemSelected={};for(var i in this.PopupElement)this.PopupAddItem(this.PopupElement[i]);this.PopupBlock=BX.findChildren(BX("crm-"+this.crmID+"_"+this.name+"-blocks"),{className:"crm-block-cont-block"});this.PopupSearch=BX.findChildren(BX("crm-"+this.crmID+"_"+this.name+"-block-cont-search"),{className:"crm-block-cont-search-tab"});this.PopupSearchInput=BX("crm-"+this.crmID+"_"+this.name+"-search-input");for(var i=0;i<this.PopupTabs.length;i++)eval('BX.bind(this.PopupTabs[i], "click", function(event){ CRM.PopupShowBlock("'+this.crmID+'", this); BX.PreventDefault(event); })');for(var i=0;i<this.PopupSearch.length;i++)eval('BX.bind(this.PopupSearch[i], "click", function(event){ CRM.PopupShowSearchBlock("'+this.crmID+'", this); BX.PreventDefault(event); })');eval('BX.bind(this.PopupSearchInput, "keyup", function(event){ CRM.SearchChange("'+this.crmID+'")})');this.PopupSave()};CRM.prototype.Clear=function(){if(this.popup){this.popup.destroy()}var e=BX("crm-"+this.crmID+"_"+this.name+"-input-box");if(e){this.div.removeChild(e);BX.remove(e)}var t=BX("crm-"+this.crmID+"_"+this.name+"-text-box");if(t){BX.remove(t)}var a=BX("crm-"+this.crmID+"_"+this.name+"-html-box");if(a){BX.remove(a)}};CRM.Set=function(e,t,a,n,r,o,c,i,p,l){var m=e.id+a;if(obCrm[m]){obCrm[m].Clear();delete obCrm[m]}obCrm[m]=new CRM(m,CRM.GetWrapperDivPa(e),e,t,n,r,o,c,i,p,l);obCrm[m].Init();return m};CRM.GetElementForm=function(e){return BX.findParent(e,{tagName:"FORM"})};CRM.GetWrapperDivPr=function(e,t){return BX.findPreviousSibling(e,{tagName:"DIV",property:{name:"crm-"+t+"-box"}})};CRM.GetWrapperDivN=function(e,t){return BX.findNextSibling(e,{tagName:"DIV",property:{name:"crm-"+t+"-box"}})};CRM.GetWrapperDivPa=function(e,t){while(e.nodeName!="DIV"&&e.name!="crm-"+t+"-box")e=e.parentNode;return e.parentNode};CRM.prototype.Open=function(e){if(!BX.type.isPlainObject(e)){e={}}var t=BX.type.isPlainObject(e["titleBar"])?e["titleBar"]:null;var a=BX.type.isPlainObject(e["closeIcon"])?e["closeIcon"]:null;var n=BX.type.isBoolean(e["closeByEsc"])?e["closeByEsc"]:false;if(BX.PopupWindowManager._currentPopup!==null&&BX.PopupWindowManager._currentPopup.uniquePopupId=="CRM-"+this.crmID+"-popup"){BX.PopupWindowManager._currentPopup.close()}else{var r=[];if(this.PopupMultiple){r=[new BX.PopupWindowButton({text:this.PopupLocalize["ok"],className:"popup-window-button-accept",events:{click:BX.delegate(this._handleAcceptBtnClick,this)}}),new BX.PopupWindowButtonLink({text:this.PopupLocalize["cancel"],className:"popup-window-button-link-cancel",events:{click:function(){this.popupWindow.close()}}})]}else{r=[new BX.PopupWindowButton({text:this.PopupLocalize["close"],className:"popup-window-button-accept",events:{click:function(){this.popupWindow.close()}}})]}this.popup=BX.PopupWindowManager.create("CRM-"+this.crmID+"-popup",this.el,{content:BX("crm-"+this.crmID+"_"+this.name+"-block-content-wrap"),titleBar:t,closeIcon:a,closeByEsc:n,offsetTop:2,offsetLeft:-15,zIndex:5e3,buttons:r,autoHide:!this.PopupMultiple});this.popup.show();BX.focus(this.PopupSearchInput)}return false};CRM.PopupSave2=function(e){if(!obCrm[e])return false;obCrm[e].PopupSave()};CRM.prototype._handleAcceptBtnClick=function(){this.PopupSave();this.popup.close()};CRM.prototype.AddOnSaveListener=function(e){if(typeof e!="function"){return}var t=this.onSaveListeners;for(var a=0;a<t.length;a++){if(t[a]==e){return}}t.push(e)};CRM.prototype.RemoveOnSaveListener=function(e){var t=this.onSaveListeners;for(var a=0;a<t.length;a++){if(t[a]==e){t.splice(a,1);break}}};CRM.prototype.AddOnBeforeSearchListener=function(e){if(typeof e!="function"){return}var t=this.onBeforeSearchListeners;for(var a=0;a<t.length;a++){if(t[a]==e){return}}t.push(e)};CRM.prototype.RemoveOnBeforeSearchListener=function(e){var t=this.onBeforeSearchListeners;for(var a=0;a<t.length;a++){if(t[a]==e){t.splice(a,1);break}}};CRM.prototype.PopupSave=function(){var e={};for(var t in this.PopupEntityType){var a=BX.findChildren(BX("crm-"+this.crmID+"_"+this.name+"-block-"+this.PopupEntityType[t]+"-selected"),{className:"crm-block-cont-block-item"});if(a!==null){var n=0;e[this.PopupEntityType[t]]={};for(var r=0;r<a.length;r++){var o="selected-crm-"+this.crmID+"_"+this.name+"-block-item-";var c=a[r].id.substr(o.length);var i={id:this.PopupItem[c]["id"],type:this.PopupEntityType[t],place:this.PopupItem[c]["place"],title:this.PopupItem[c]["title"],desc:this.PopupItem[c]["desc"],url:this.PopupItem[c]["url"],image:this.PopupItem[c]["image"]};if(typeof this.PopupItem[c]["customData"]!="undefined"){i["customData"]=this.PopupItem[c]["customData"]}if(typeof this.PopupItem[c]["advancedInfo"]!="undefined"){i["advancedInfo"]=this.PopupItem[c]["advancedInfo"]}e[this.PopupEntityType[t]][n]=i;n++}}}var p=this.onSaveListeners;if(p.length>0){for(var l=0;l<p.length;l++){try{p[l](e)}catch(m){}}}if(!this.disableMarkup){this.PopupCreateValue(e)}};CRM.prototype.ClearSelectItems=function(){this.PopupItemSelected={}};CRM.PopupShowBlock=function(e,t,a){if(!obCrm[e])return false;for(var n=0;n<obCrm[e].PopupTabs.length;n++){if(obCrm[e].PopupTabs[n]==t){obCrm[e].PopupTabsIndex=n;obCrm[e].PopupTabsIndexId=obCrm[e].PopupTabs[n].id}obCrm[e].PopupBlock[n].style.display="none";BX.removeClass(obCrm[e].PopupTabs[n],"selected")}if(!a){BX.addClass(t,"selected");obCrm[e].PopupSearchInput.value="";BX("crm-"+e+"_"+obCrm[e].name+"-block-search").innerHTML=""}else BX.addClass(obCrm[e].PopupTabs[obCrm[e].PopupTabsIndex],"selected");obCrm[e].PopupBlock[obCrm[e].PopupTabsIndex].style.display="block";BX("crm-"+e+"_"+obCrm[e].name+"-block-search").style.display="none";BX.removeClass(obCrm[e].PopupSearch[1],"selected");BX.addClass(obCrm[e].PopupSearch[0],"selected");BX.focus(obCrm[e].PopupSearchInput)};CRM.PopupShowSearchBlock=function(e,t){if(!obCrm[e])return false;for(var a=0;a<obCrm[e].PopupBlock.length;a++)obCrm[e].PopupBlock[a].style.display="none";var n=true;if(t==obCrm[e].PopupSearch[0]){CRM.PopupShowBlock(e,BX(obCrm[e].CrmPopupTabsIndexId),n);return false}BX("crm-"+obCrm[e].crmID+"_"+obCrm[e].name+"-block-search").style.display="block";BX.removeClass(obCrm[e].PopupSearch[0],"selected");BX.addClass(t,"selected");BX.focus(obCrm[e].PopupSearchInput)};CRM.PopupSelectItem=function(crmID,element,tab,unsave,select){if(!obCrm[crmID])return false;var flag=element;if(flag.check){if(select===undefined||select==false)CRM.PopupUnselectItem(crmID,element.id,"selected-"+element.id);return false}elementIdLength="crm-"+crmID+"_"+obCrm[crmID].name+"-block-item-";elementId=element.id.substr(elementIdLength.length);var addCrmItems=document.createElement("span");addCrmItems.className="crm-block-cont-block-item";addCrmItems.id="selected-"+element.id;var addCrmDelBut=document.createElement("i");var addCrmLink=document.createElement("a");addCrmLink.href=obCrm[crmID].PopupItem[elementId]["url"];addCrmLink.target="_blank";var blockWrap;if(tab===null){if(obCrm[crmID].PopupTabsIndexId=="crm-"+crmID+"_"+obCrm[crmID].name+"-tab-lead")blockWrap=BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-lead-selected");if(obCrm[crmID].PopupTabsIndexId=="crm-"+crmID+"_"+obCrm[crmID].name+"-tab-contact")blockWrap=BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-contact-selected");if(obCrm[crmID].PopupTabsIndexId=="crm-"+crmID+"_"+obCrm[crmID].name+"-tab-deal")blockWrap=BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-deal-selected");if(obCrm[crmID].PopupTabsIndexId=="crm-"+crmID+"_"+obCrm[crmID].name+"-tab-quote")blockWrap=BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-quote-selected");if(obCrm[crmID].PopupTabsIndexId=="crm-"+crmID+"_"+obCrm[crmID].name+"-tab-company")blockWrap=BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-company-selected")}else blockWrap=BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-"+tab+"-selected");if(obCrm[crmID].PopupMultiple){blockTitle=BX.findChild(blockWrap,{className:"crm-block-cont-right-title-count"},true);blockTitle.innerHTML=parseInt(blockTitle.innerHTML)+1;BX.addClass(element,"crm-block-cont-item-selected");BX.addClass(blockWrap,"crm-added-item");flag.check=1}else{for(var i in obCrm[crmID].PopupEntityType){BX.removeClass(BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-"+obCrm[crmID].PopupEntityType[i]+"-selected"),"crm-added-item");elements=BX.findChildren(BX("crm-"+crmID+"_"+obCrm[crmID].name+"-block-"+obCrm[crmID].PopupEntityType[i]+"-selected"),{className:"crm-block-cont-block-item"});if(elements!==null)for(var i in elements)BX.remove(elements[i])}}blockWrap.appendChild(addCrmItems).appendChild(addCrmDelBut);blockWrap.appendChild(addCrmItems).appendChild(addCrmLink).innerHTML=BX.util.htmlspecialchars(obCrm[crmID].PopupItem[elementId]["title"]);eval('BX.bind(addCrmDelBut, "click", function(event) {CRM.PopupUnselectItem("'+crmID+'", element.id, "selected-"+element.id); BX.PreventDefault(event);})');obCrm[crmID].PopupItemSelected[elementId]=element;if(!obCrm[crmID].PopupMultiple&&(unsave===undefined||unsave==false)){obCrm[crmID].PopupSave();BX.PopupWindowManager._currentPopup.close()}};CRM.PopupUnselectItem=function(e,t,a){if(!obCrm[e])return false;if(obCrm[e].PopupMultiple){if(BX(a).parentNode.getElementsByTagName("span").length==3)BX.removeClass(BX(a).parentNode,"crm-added-item");blockTitle=BX.findChild(BX(a).parentNode,{className:"crm-block-cont-right-title-count"},true);blockTitle.innerHTML=parseInt(blockTitle.innerHTML)-1;obj=BX(t);if(obj!==null){obj.check=0;BX.removeClass(obj,"crm-block-cont-item-selected")}}elementIdLength="crm-"+e+"_"+obCrm[e].name+"-block-item-";elementId=t.substr(elementIdLength.length);delete obCrm[e].PopupItemSelected[elementId];BX.remove(BX(a))};CRM.prototype.SetPopupItems=function(e,t){this.PopupItem={};this.PopupItemSelected={};var a=BX("crm-"+this.crmID+"_"+this.name+"-block-"+e);BX.cleanNode(a);for(var n=0;n<t.length;n++){var r=t[n];r["place"]=e;this.PopupAddItem(r)}};CRM.prototype.PopupSetItem=function(e){ar=e.toString().split("_");if(ar[1]!==undefined){entityShortName=ar[0];entityId=ar[1];if(entityShortName=="L")entityType="lead";else if(entityShortName=="C")entityType="contact";else if(entityShortName=="CO")entityType="company";else if(entityShortName=="D")entityType="deal";else if(entityShortName=="Q")entityType="quote"}else{for(var t in this.PopupEntityType)entityType=this.PopupEntityType[t];entityId=e}var a=this;var n={REQUIRE_REQUISITE_DATA:a.options.requireRequisiteData?"Y":"N"};BX.ajax({url:"/bitrix/components/bitrix/crm."+entityType+".list/list.ajax.php",method:"POST",dataType:"json",data:{MODE:"SEARCH",VALUE:entityId,MULTI:a.PopupPrefix?"Y":"N",OPTIONS:n},onsuccess:function(e){for(var t in e){e[t]["selected"]="Y";a.PopupAddItem(e[t])}a.PopupSave()},onfailure:function(e){}})};CRM.prototype.PopupAddItem=function(e){if(e["place"]===undefined||e["place"]=="")e["place"]=e["type"];bElementSelected=false;if(this.PopupItemSelected[e["id"]+"-"+e["place"]]!==undefined)bElementSelected=true;itemBody=document.createElement("span");itemBody.id="crm-"+this.crmID+"_"+this.name+"-block-item-"+e["id"]+"-"+e["place"];itemBody.className="crm-block-cont-item"+(bElementSelected?" crm-block-cont-item-selected":"");itemBody.check=bElementSelected?1:0;if(e["type"]=="contact"||e["type"]=="company"){itemAvatar=document.createElement("span");itemAvatar.className="crm-avatar";if(e["image"]!==undefined&&e["image"]!=""){itemAvatar.style.background='url("'+e["image"]+'") no-repeat'}itemBody.appendChild(itemAvatar)}itemTitle=document.createElement("ins");itemTitle.appendChild(document.createTextNode(e["title"]));itemId=document.createElement("var");itemId.className="crm-block-cont-var-id";itemId.appendChild(document.createTextNode(e["id"]));itemUrl=document.createElement("var");itemUrl.className="crm-block-cont-var-url";itemUrl.appendChild(document.createTextNode(e["url"]));var t=document.createElement("span");t.innerHTML=this.prepareDescriptionHtml(e["desc"]);var a=document.createElement("span");a.className="crm-block-cont-contact-info";a.appendChild(itemTitle);a.appendChild(t);a.appendChild(itemId);a.appendChild(itemUrl);itemBody.appendChild(a);itemBody.appendChild(document.createElement("i"));bDefinedItem=false;if(e["place"]!="search"&&this.PopupItem[e["id"]+"-"+e["place"]]!==undefined)bDefinedItem=true;else this.PopupItem[e["id"]+"-"+e["place"]]=e;var n=BX("crm-"+this.crmID+"_"+this.name+"-block-"+e["place"]);if(n!==null){if(!bDefinedItem)n.appendChild(itemBody);CRM._bindPopupItem(this.crmID,itemBody,e["type"]);if(e["selected"]!==undefined&&e["selected"]=="Y")CRM.PopupSelectItem(this.crmID,itemBody,e["type"],true,true)}};CRM._bindPopupItem=function(e,t,a){BX.bind(t,"click",function(n){CRM.PopupSelectItem(e,t,a);return BX.PreventDefault(n)})};CRM.prototype.prepareDescriptionHtml=function(e){if(!e.replace){return e}return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};CRM.SearchChange=function(e){if(!obCrm[e])return false;var t=obCrm[e].PopupSearchInput.value;if(t=="")return false;var a="";if(obCrm[e].PopupTabsIndexId=="crm-"+e+"_"+obCrm[e].name+"-tab-lead")a="lead";else if(obCrm[e].PopupTabsIndexId=="crm-"+e+"_"+obCrm[e].name+"-tab-contact")a="contact";else if(obCrm[e].PopupTabsIndexId=="crm-"+e+"_"+obCrm[e].name+"-tab-deal")a="deal";else if(obCrm[e].PopupTabsIndexId=="crm-"+e+"_"+obCrm[e].name+"-tab-quote")a="quote";else if(obCrm[e].PopupTabsIndexId=="crm-"+e+"_"+obCrm[e].name+"-tab-company")a="company";else a=obCrm[e].PopupEntityType;var n={REQUIRE_REQUISITE_DATA:obCrm[e].options.requireRequisiteData?"Y":"N"};var r={MODE:"SEARCH",VALUE:t,MULTI:obCrm[e].PopupPrefix?"Y":"N",OPTIONS:n};if(e==="new_invoice_product_button"){r["ENTITY_TYPE"]="INVOICE"}var o="/bitrix/components/bitrix/crm."+a+".list/list.ajax.php";var c=obCrm[e].onBeforeSearchListeners;if(c&&BX.type.isArray(c)&&c.length>0){var i={entityType:a,postData:r};for(var p=0;p<c.length;p++){try{c[p](i)}catch(l){}r=i["postData"]}}CRM.PopupShowSearchBlock(e,obCrm[e].PopupSearch[1]);setTimeout(function(){if(BX("crm-"+e+"_"+obCrm[e].name+"-block-search").innerHTML==""&&obCrm[e].PopupTabsIndexId=="crm-"+e+"_"+obCrm[e].name+"-tab-"+a){var t=document.createElement("div");t.className="crm-block-cont-search-wait";t.innerHTML=obCrm[e].PopupLocalize["wait"];BX("crm-"+e+"_"+obCrm[e].name+"-block-search").appendChild(t)}},3e3);BX.ajax({url:o,method:"POST",dataType:"json",data:r,onsuccess:function(t){if(obCrm[e].PopupTabsIndexId!="crm-"+e+"_"+obCrm[e].name+"-tab-"+a)return false;BX("crm-"+e+"_"+obCrm[e].name+"-block-search").className="crm-block-cont-block crm-block-cont-block-"+a;BX("crm-"+e+"_"+obCrm[e].name+"-block-search").innerHTML="";el=0;for(var n in t){t[n]["place"]="search";obCrm[e].PopupAddItem(t[n]);el++}if(el==0){var r=document.createElement("div");r.className="crm-block-cont-search-no-result";r.innerHTML=obCrm[e].PopupLocalize["noresult"];BX("crm-"+e+"_"+obCrm[e].name+"-block-search").appendChild(r)}},onfailure:function(e){}})};CRM.prototype.PopupCreateValue=function(arElements){var inputBox=BX("crm-"+this.crmID+"_"+this.name+"-input-box");var textBox=BX("crm-"+this.crmID+"_"+this.name+"-text-box");if(!inputBox||!textBox){return}inputBox.innerHTML="";var textBoxNew=document.createElement("DIV");textBoxNew.id=textBox.id;textBox.parentNode.replaceChild(textBoxNew,textBox);textBox=textBoxNew;var tableObject=document.createElement("table");tableObject.className="field_crm";tableObject.cellPadding="0";tableObject.cellSpacing="0";var tbodyObject=document.createElement("TBODY");var iEl=0;for(var type in arElements){var rowObject=document.createElement("TR");rowObject.className="crmPermTableTrHeader";if(this.PopupEntityType.length>1){var cellObject=document.createElement("TD");cellObject.className="field_crm_entity_type";cellObject.appendChild(document.createTextNode(this.PopupLocalize[type]+":"));rowObject.appendChild(cellObject)}cellObject=document.createElement("TD");cellObject.className="field_crm_entity";var iTypeEl=0;for(var i in arElements[type]){var addInput=document.createElement("input");addInput.type="text";addInput.name=this.name+(this.PopupMultiple?"[]":"");addInput.value=arElements[type][i]["id"];inputBox.appendChild(addInput);var addCrmLink=document.createElement("a");addCrmLink.href=arElements[type][i]["url"];addCrmLink.target="_blank";addCrmLink.appendChild(document.createTextNode(arElements[type][i]["title"]));cellObject.appendChild(addCrmLink);var addCrmDeleteLink=document.createElement("span");addCrmDeleteLink.className="crm-element-item-delete";addCrmDeleteLink.id="deleted-crm-"+this.crmID+"_"+this.name+"-block-item-"+arElements[type][i]["id"]+"-"+arElements[type][i]["place"];eval('BX.bind(addCrmDeleteLink, "click", function(event) { CRM.PopupUnselectItem("'+this.crmID+'", this.id.substr(8), "selected-"+this.id.substr(8)); CRM.PopupSave2("'+this.crmID+'");})');cellObject.appendChild(addCrmDeleteLink);iTypeEl++;iEl++}if(iTypeEl>0){rowObject.appendChild(cellObject);tbodyObject.appendChild(rowObject)}}if(iEl==0){var addInput=document.createElement("input");addInput.type="text";addInput.name=this.name+(this.PopupMultiple?"[]":"");addInput.value="";inputBox.appendChild(addInput)}tableObject.appendChild(tbodyObject);textBox.appendChild(tableObject);if(this.el){if(iEl>0){this.el.innerHTML=this.PopupLocalize["edit"]}else{BX.cleanNode(textBox,false);if(BX.browser.IsIE()){textBox.style.fontSize="0px";textBox.style.lineHeight="0px"}this.el.innerHTML=this.PopupLocalize["add"]}}};CRM.prototype.popupShowMarkup=function(){var e=document.createElement("div");e.id="crm-"+this.crmID+"_"+this.name+"-block-content-wrap";e.className="crm-block-content";var t=document.createElement("table");t.className="crm-box-layout";if(!this.PopupMultiple)t.className=t.className+" crm-single-column";t.cellSpacing="0";var a=document.createElement("tbody");var n=document.createElement("TR");var r=document.createElement("TD");r.className="crm-block-cont-left";var o=document.createElement("div");o.id="crm-"+this.crmID+"_"+this.name+"-tabs";o.className="crm-block-cont-tabs-wrap";if(this.PopupEntityType.length==1)o.className=o.className+" crm-single-entity";var c=true;for(var i in this.PopupEntityType){var p=document.createElement("span");p.className="crm-block-cont-tabs"+(c?" selected":"");p.id="crm-"+this.crmID+"_"+this.name+"-tab-"+this.PopupEntityType[i];var l=document.createElement("span");var m=document.createElement("span");m.appendChild(document.createTextNode(this.PopupLocalize[this.PopupEntityType[i]]));l.appendChild(m);p.appendChild(l);o.appendChild(p);c=false}r.appendChild(o);o=document.createElement("div");o.id="crm-"+this.crmID+"_"+this.name+"-block-cont-search";o.className="crm-block-cont-search";var s=document.createElement("input");s.type="text";s.id="crm-"+this.crmID+"_"+this.name+"-search-input";o.appendChild(s);var d=document.createElement("span");d.className="crm-block-cont-search-tab selected";d.appendChild(document.createElement("span"));var u=document.createElement("a");u.href="#";u.appendChild(document.createTextNode(this.PopupLocalize["last"]));d.appendChild(u);d.appendChild(document.createElement("span"));o.appendChild(d);d=document.createElement("span");d.className="crm-block-cont-search-tab";d.appendChild(document.createElement("span"));u=document.createElement("a");u.href="#";u.appendChild(document.createTextNode(this.PopupLocalize["search"]));d.appendChild(u);d.appendChild(document.createElement("span"));o.appendChild(d);r.appendChild(o);o=document.createElement("div");o.className="popup-window-hr popup-window-buttons-hr";o.appendChild(document.createElement("b"));r.appendChild(o);o=document.createElement("div");o.id="crm-"+this.crmID+"_"+this.name+"-blocks";o.className="crm-block-cont-blocks-wrap";c=true;for(var i in this.PopupEntityType){var h=document.createElement("div");h.id="crm-"+this.crmID+"_"+this.name+"-block-"+this.PopupEntityType[i];h.className="crm-block-cont-block crm-block-cont-block-"+this.PopupEntityType[i];h.style.display=c?"block":"none";o.appendChild(h);c=false}h=document.createElement("div");h.id="crm-"+this.crmID+"_"+this.name+"-block-search";h.className="crm-block-cont-block";h.style.display="none";o.appendChild(h);h=document.createElement("div");h.id="crm-"+this.crmID+"_"+this.name+"-block-declared";h.className="crm-block-cont-block";h.style.display="none";o.appendChild(h);r.appendChild(o);n.appendChild(r);var b=document.createElement("TD");b.className="crm-block-cont-right";var C=document.createElement("div");C.className="crm-block-cont-right-wrap-item";for(var i in this.PopupEntityType){var f=document.createElement("div");f.className="crm-block-cont-right-item";f.id="crm-"+this.crmID+"_"+this.name+"-block-"+this.PopupEntityType[i]+"-selected";var I=document.createElement("span");I.className="crm-block-cont-right-title";I.appendChild(document.createTextNode(this.PopupLocalize[this.PopupEntityType[i]]));I.appendChild(document.createTextNode(" ("));var v=document.createElement("span");v.className="crm-block-cont-right-title-count";v.appendChild(document.createTextNode("0"));I.appendChild(v);I.appendChild(document.createTextNode(")"));f.appendChild(I);C.appendChild(f)}b.appendChild(C);n.appendChild(b);a.appendChild(n);t.appendChild(a);e.appendChild(t);var P=document.createElement("div");document.body.appendChild(P);P.id="crm-"+this.crmID+"_"+this.name+"-html-box";P.className="crm-place-holder";P.appendChild(e);if(this.div){var y=document.createElement("div");y.id="crm-"+this.crmID+"_"+this.name+"-input-box";y.style.display="none";this.div.appendChild(y);var B="crm-"+this.crmID+"_"+this.name+"-text-box";if(BX(B)){throw"Already exists "+B}var k=document.createElement("div");this.div.insertBefore(k,this.div.firstChild);k.id="crm-"+this.crmID+"_"+this.name+"-text-box"}};
//# sourceMappingURL=crm.map.js