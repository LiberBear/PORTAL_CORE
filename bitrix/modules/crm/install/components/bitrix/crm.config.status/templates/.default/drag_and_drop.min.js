var DragManager=new function(){var t={};var e=this;function n(e){if(e.which!=1)return;var n=e.target.closest(".draggable");if(!n)return;if(!n.parentNode.className.match(/\bdraghandle\b/))return;t.elem=n;t.downX=e.pageX;t.downY=e.pageY;return false}function a(n){if(!t.elem)return;if(!t.avatar){var a=n.pageX-t.downX;var o=n.pageY-t.downY;if(Math.abs(a)<3&&Math.abs(o)<3){return}t.avatar=i(n);if(!t.avatar){t={};return}var r=getCoords(t.avatar);t.shiftX=t.downX-r.left;t.shiftY=t.downY-r.top;l(n)}t.avatar.style.left=n.pageX-t.shiftX+"px";t.avatar.style.top=n.pageY-t.shiftY+"px";var s=f(n);if(!s)return false;e.onDragMove(t,s,n);return false}function o(e){if(t.avatar){r(e)}t={}}function r(n){var a=s(n),o=f(n);if(!a){e.onDragCancel(t)}else{e.onDragEnd(t,a,o)}}function i(e){var n=t.elem.parentNode;var a={parent:n.parentNode,nextSibling:n.nextSibling,position:n.position||"",left:n.left||"",top:n.top||"",zIndex:n.zIndex||""};n.rollback=function(){a.parent.insertBefore(n,a.nextSibling);n.style.position=a.position;n.style.left=a.left;n.style.top=a.top;n.style.zIndex=a.zIndex};n.styleback=function(){n.style.position=a.position;n.style.left=a.left;n.style.top=a.top;n.style.zIndex=a.zIndex};return n}function l(e){var n=t.avatar;document.body.appendChild(n);n.style.zIndex=9999;n.style.position="absolute"}function s(e){t.avatar.hidden=true;var n=document.elementFromPoint(e.clientX,e.clientY);t.avatar.hidden=false;if(n==null){return null}return n.closest(".droppable")}function f(e){t.avatar.hidden=true;var n=document.elementFromPoint(e.clientX,e.clientY);t.avatar.hidden=false;if(n==null)return null;return n.closest(".draghandle")}document.onmousemove=a;document.onmouseup=o;document.onmousedown=n;this.onDragEnd=function(t,e,n){};this.onDragCancel=function(t){};this.onDragMove=function(t,e,n){}};function getCoords(t){var e=t.getBoundingClientRect();return{top:e.top+pageYOffset,left:e.left+pageXOffset}}
//# sourceMappingURL=drag_and_drop.map.js